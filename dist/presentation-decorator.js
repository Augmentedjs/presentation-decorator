!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("presentation-dom"),require("next-core-utilities"),require("presentation-models"),require("presentation-widget"),require("presentation-mediator")):"function"==typeof define&&define.amd?define("presentation-decorator",["presentation-dom","next-core-utilities","presentation-models","presentation-widget","presentation-mediator"],t):"object"==typeof exports?exports["presentation-decorator"]=t(require("presentation-dom"),require("next-core-utilities"),require("presentation-models"),require("presentation-widget"),require("presentation-mediator")):e["presentation-decorator"]=t(e["presentation-dom"],e["next-core-utilities"],e["presentation-models"],e["presentation-widget"],e["presentation-mediator"])}(this,(function(e,t,n,i,r){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t),n.d(t,"DecoratorView",(function(){return g})),n.d(t,"DirectiveView",(function(){return v}));var i=n(1),r=n(4),o=n(2),s=n(0),a=n.n(s),l=n(3),c=n.n(l);const u="data-click",d="data-function",h="data-style",p="data-use-value",m="data-append-template",f="data-prepend-template";class b extends r.Colleague{constructor(e){super(e),e&&e.events&&(e.customEvents=e.events),e&&e.customEvents?this.customEvents=e.customEvents:this.customEvents={}}events(){const e=this.customEvents?this.customEvents:{};return this.name&&(e[`change input[${this.bindingAttribute()}]`]="_changed",e[`change textarea[${this.bindingAttribute()}]`]="_changed",e[`change select[${this.bindingAttribute()}]`]="_changed",e[`click *[${this.bindingAttribute()}][${u}]`]="_click"),e}_changed(e){if(e){const t=e.currentTarget.getAttribute(this.bindingAttribute());let n=e.currentTarget.value;if("checkbox"===e.currentTarget.type){const t=e.currentTarget.getAttribute(p);console.debug("checkbox use value",t),t&&n||(n=!!e.currentTarget.checked)}this.model.set(t||e.currentTarget.name,n),this._func(e)}}_click(e){if(e){let t=e.currentTarget.getAttribute(u);t&&this[t]&&this._executeFunctionByName(t,this,e),this._func(e)}}_func(e){if(e){let t=e.currentTarget.getAttribute(d);t&&this[t]&&this._executeFunctionByName(t,this,e)}}initialize(e){this.init(e),this.model||(this.model=new o.Model)}remove(){return this.undelegateEvents(),this.off(),this.stopListening(),this}_executeFunctionByName(e,t,...n){const i=e.split("."),r=i.pop();if(i&&r){let e=0;const o=i.length;for(e=0;e<o;e++)t=t[i[e]];return t[r].apply(t,n)}return null}bindingAttribute(){return"data-"+this.name}injectTemplate(e,t){if(t||(t=this.el),Object(i.isString)(t)){const e=document.querySelector(t);if(!e)return;t=e}if(Object(i.isString)(e)){const n=t.innerHTML;t.innerHTML=`${n}${e}`}else e.nodeType&&e.nodeName&&e.nodeType>0&&"template"!==e.nodeName&&"TEMPLATE"!==e.nodeName?t.appendChild(e):(e instanceof DocumentFragment||"template"===e.nodeName||"TEMPLATE"===e.nodeName)&&a.a.injectTemplate(e,t);this.delegateEvents()}removeTemplate(e,t){if(e){let n;if(n=Object(i.isString)(e)?a.a.selector(e):e,n){for(;n.firstChild;)n.removeChild(n.firstChild);if(!t){const e=n.parentNode;e&&e.removeChild(n)}this.delegateEvents()}else console.warn(`template not removed from ${e}`)}}boundElement(e){if(this.el&&e){let t=this.el;if(Object(i.isString)(this.el)&&(t=document.querySelector(this.el)),t)return t.querySelector("["+this.bindingAttribute()+"="+e+"]")}return null}syncBoundElement(e){if(e){let t=new UIEvent("change",{view:window,bubbles:!0,cancelable:!0}),n=this.boundElement(e);n&&n.dispatchEvent(t)}}syncAllBoundElements(){const e=this.bindingAttribute();if(this.el&&e){const t=document.querySelectorAll(`${this.el}[${e}]`);if(t&&t.length>0){let e=0,n=t.length,i=new UIEvent("change",{view:window,bubbles:!0,cancelable:!0});for(e=0;e<n;e++)t[e].dispatchEvent(i)}}}addClass(e,t){const n=this.boundElement(e);n&&n.classList.add(t)}removeClass(e,t){const n=this.boundElement(e);n&&n.classList.remove(t)}bindModelChange(e){this.model||(this.model=new o.Model),this.model.on("change",e,this)}syncModelChange(e){this.model||(this.model=new o.Model),e?this.model.on("change:"+e,this._syncData.bind(this,e),this):this.model.on("change",this._syncAllData.bind(this,e),this)}_syncData(e){let t=this.boundElement(e);if(t){let n,i,r=this.model.get(e),o=t.getAttribute(h),s=t.getAttribute(f),l=t.getAttribute(m);if(s&&(n=document.createElement("div"),i=a.a.selector("#"+s),t.appendChild(n),this.injectTemplate(i,n)),o){let e;"list"===o||"unordered-list"===o?(e=c.a.List(null,r,!1),a.a.empty(t),t.appendChild(e)):"ordered-list"===o?(e=c.a.List(null,r,!0),a.a.empty(t),t.appendChild(e)):"description-list"===o&&(e=c.a.DescriptionList(null,r),a.a.empty(t),t.appendChild(e))}else a.a.setValue(t,r||"");l&&(n=document.createElement("div"),i=a.a.selector("#"+l),t.appendChild(n),this.injectTemplate(i,n))}}_syncAllData(){const e=this.model.attributes;if(e){let t=0;const n=Object.keys(e),i=n.length;for(t=0;t<i;t++)this._syncData(n[t])}}unbindModelChange(e){this.model.unBind("change",e,this)}unbindModelSync(e){this.model.unBind("change:"+e,this._syncData,this)}}var g=b;var v=class extends g{constructor(e){super(e)}render(){return super.render()}remove(){return this.removeTemplate(this.el,!0),super.remove()}}}])}));
//# sourceMappingURL=presentation-decorator.js.map